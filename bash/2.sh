#!/bin/bash

# Проверяем, передан ли аргумент
if [ "$#" -ne 1 ]; then
    echo "Использование: $0 <путь>"
    exit 1
fi

# Считываем путь из аргумента
DIR_PATH=$1

# Проверяем, существует ли указанный путь
if [ ! -d "$DIR_PATH" ]; then
    echo "Ошибка: путь '$DIR_PATH' не существует или не является каталогом."
    exit 1
fi

# Перебираем все подкаталоги в указанном пути
for SUBDIR in "$DIR_PATH"/*; do
    # Проверяем, является ли элемент подкаталогом
    if [ -d "$SUBDIR" ]; then
        # Получаем название подкаталога
        SUBDIR_NAME=$(basename "$SUBDIR")
        
        # Считаем количество элементов в подкаталоге
        ITEM_COUNT=$(ls -1 "$SUBDIR" | wc -l)
        
        # Создаём файл с названием подкаталога и записываем туда число элементов
        echo "$ITEM_COUNT" > "$DIR_PATH/$SUBDIR_NAME.txt"
    fi
done

echo "Файлы успешно созданы."

